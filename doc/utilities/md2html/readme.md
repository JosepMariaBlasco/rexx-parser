md2html
=======

----------------

MD2Html ("MarkDown to HTML") is a batch utility
that transforms a set of Markdown files to HTML, after expanding
all Rexx fenced code blocks.

Usage
-----

<pre>
[rexx] md2html [<em>options</em>] <em>source</em> [<em>destination</em>]
</pre>

<em>Source</em> and <em>destination</em> should be existing directories.
<em>Destination</em> defaults to the current directory.

Options
-------

\

----------------------------------------------- ------------------------------
`-?`                                            Display this help
<code>-c    <em>cssbase</em></code>&nbsp;&nbsp; Where to locate the css files
<code>--css <em>cssbase</em></code>             Where to locate the css files
`-h`                                            Display this help
`--help`                                        Display this help
----------------------------------------------- ------------------------------

\

<em>Cssbase</em> defaults to the filesystem location of a first-level `css`
subdirectory of the <em>destination</em> directory, when one exists;
otherwise, specifying one of the `--css` or `-c` options is mandatory.

Prerequisites
-------------

A working installation of <a href="https://pandoc.org/">Pandoc</a> is required.

Program operation
-----------------

The `md2html.rex` lists all Markdown (`.md`) files found in the source
directory and processes each file in turn. The utility first expands
all the Rexx fenced code blocks found in the file,
using [the Rexx Highlighter](../../highlighter),
runs <a href="https://pandoc.org/">Pandoc</a> the file to convert
it to HTML, and finally calls a set of routines
found in `md2html.custom.rex`, which provide the constant or
almost constant parts of an HTML page, like headers, footers,
menus or sidebars.

```
                               md2html workflow
                               ────────────────

                        ╔═════════════════════════════╗
                        ║                             ║
                        ║ (1) Markdown source file    ║
                        ║                             ║
                        ╚═════════════════════════════╝
                                       │
                                       │ ◀──── The Rexx Highlighter (FencedCode.cls)
                                       │
                                       ▼
                        ╔═════════════════════════════╗
                        ║                             ║
                        ║ (2) Markdown +              ║
                        ║     Rexx code expanded      ║
                        ║                             ║
                        ╚═════════════════════════════╝
                                       │
                                       │ ◀──── pandoc
                                       │
                                       ▼
                        ╔═════════════════════════════╗
                        ║                             ║
                        ║ (3) HTML code (inner part   ║
                        ║     of the page)            ║
                        ║                             ║
                        ╚═════════════════════════════╝
                                       │
                                       │ ◀──── default.md2html + m2html.custom.rex
                                       │
                                       ▼
                        ╔═════════════════════════════╗
                        ║                             ║
                        ║ (4) Final HTML code         ║
                        ║                             ║
                        ╚═════════════════════════════╝
```

A sample `md2html.custom.rex` is distributed with the Rexx Parser.
To allow for maximum customization, the md2html utility looks for
`md2html.custom.rex` first in the current directory,
then in the destination directory, then in the
source directory, and finally using the standard Rexx search order
for external files.

Pandoc is used to convert the source Markdown content into
the inner part of the HTML file. The structure of the whole
page is defined in a separate template file called `default.md2html`.
Md2html looks for this file and reads a line at a time. Lines starting
with `"--"` (in the first column) are considered to be comments
and are completely ignored. Other lines will be copied to the target file,
and some special markers will be expanded by md2html. For example,
`%contents%` will be substituted by the output generated by
Pandoc. To allow for maximum customization, md2html looks for
`default.md2html` first in the current directory, then in the
destination directory, then in the source directory, and
finally in the directory where md2html resides. A sample
`default.md2html` is distributed with the Rexxx Parser; it can
be found in the `bin` subdirectory.


Program source
--------------

~~~rexx {source=../../../bin/md2html.rex}
~~~